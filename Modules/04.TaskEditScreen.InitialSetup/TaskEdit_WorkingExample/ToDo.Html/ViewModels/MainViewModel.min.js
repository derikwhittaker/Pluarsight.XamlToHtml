var ToDo;(function(n){(function(n){var i=function(){function n(){var n=this;this.ToDos=ko.observableArray(),this.OriginalToDos=ko.observableArray(),this.FilterText=ko.observable(""),this.fetchToDoItems(),this.OverdueCount=ko.computed(function(){return _.filter(n.ToDos(),function(n){return n.Status().Description()=="Overdue"}).length}),this.ActiveCount=ko.computed(function(){return _.filter(n.ToDos(),function(n){return n.Status().Description()=="Active"}).length}),this.TotalCount=ko.computed(function(){return n.ToDos().length})}return n.prototype.addNewToDo=function(){var n=this;$("#todo-edit-modal").modal("show")},n.prototype.deleteToDo=function(n){var t=this,i="http://localhost:8888/ToDoServices/api/ToDo/Delete/"+n;$.ajax({url:i,type:"Delete",success:function(){t.fetchToDoItems()},error:function(){}})},n.prototype.fetchToDoItems=function(){var n=this;n.ToDos.removeAll(),n.OriginalToDos.removeAll(),$.get("http://localhost:8888/ToDoServices/api/ToDo/").done(function(i){var r=n.ToDos();_.each(i,function(n){var i=ko.mapping.fromJS(n,{},new t);r.push(i)}),n.ToDos.valueHasMutated(),n.OriginalToDos(n.ToDos())})},n.prototype.filterList=function(){var n=this,t;this.FilterText().length==0?n.ToDos(this.OriginalToDos()):(t=_.filter(n.OriginalToDos(),function(t){return t.Task().toLowerCase().indexOf(n.FilterText().toLocaleLowerCase())>=0}),n.ToDos(t))},n}(),t;n.MainViewModel=i,t=function(){function n(){var n=this;this.Id=ko.observable(0),this.Task=ko.observable(""),this.DueDate=ko.observable(""),this.ReminderDate=ko.observable(""),this.Priority=ko.observable(""),this.Category=ko.observable(""),this.Status=ko.observable(),this.StatusStyle=ko.computed(function(){return n.Status()!=undefined?"circle status-"+n.Status().Description().toLowerCase()+"-color":"circle status-active-color"}),this.DisplayDueDate=ko.computed(function(){var t="";return n.DueDate()!=undefined&&n.DueDate()!=""&&(t=moment(n.DueDate()).format("L")),t}),this.DisplayReminderDate=ko.computed(function(){var t="";return n.ReminderDate()!=undefined&&n.ReminderDate()!=""&&(t=moment(n.ReminderDate()).format("L")),t})}return n}(),n.ToDoListItemViewModel=t})(n.ViewModels||(n.ViewModels={}));var t=n.ViewModels})(ToDo||(ToDo={}))